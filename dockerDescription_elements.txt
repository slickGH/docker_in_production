ğŸ§± 1. Image Docker
DÃ©finition : Une image est un modÃ¨le figÃ© (immutable) qui contient tout ce quâ€™il faut pour exÃ©cuter une application : le systÃ¨me de fichiers, le code source, les bibliothÃ¨ques, les dÃ©pendances, les variables dâ€™environnement, etc.

CaractÃ©ristiques :

CrÃ©e Ã  partir dâ€™un fichier Dockerfile.

Peut Ãªtre partagÃ©e (via Docker Hub ou un registre privÃ©).

Elle ne sâ€™exÃ©cute pas directement : elle sert de base pour crÃ©er un conteneur.

Exemple : Une image python:3.11-slim contient une version minimale de Python 3.11.

ğŸ“¦ 2. Conteneur
DÃ©finition : Un conteneur est une instance en cours dâ€™exÃ©cution dâ€™une image.

CaractÃ©ristiques :

Il est Ã©phÃ©mÃ¨re par dÃ©faut (sauf si vous le configurez autrement).

Il a son propre espace dâ€™exÃ©cution isolÃ© (rÃ©seau, systÃ¨me de fichiers, processus, etc.).

Il peut Ãªtre dÃ©marrÃ©, arrÃªtÃ©, redÃ©marrÃ© ou supprimÃ©.

DiffÃ©rence principale avec une image : Une image est statique et ne bouge pas, tandis quâ€™un conteneur est dynamique et vit en mÃ©moire.

ğŸ“ 3. Volume
DÃ©finition : Un volume est un mÃ©canisme de persistance des donnÃ©es dans Docker.

CaractÃ©ristiques :

StockÃ© en dehors du systÃ¨me de fichiers du conteneur, donc non effacÃ© quand le conteneur est supprimÃ©.

Utile pour stocker des donnÃ©es (bases de donnÃ©es, fichiers gÃ©nÃ©rÃ©s, configurations, etc.).

Peut Ãªtre partagÃ© entre plusieurs conteneurs.

Exemple : docker run -v nom_du_volume:/data ... monte un volume Ã  lâ€™intÃ©rieur du conteneur dans le dossier /data.

ğŸ”¨ 4. Build (construction)
DÃ©finition : Le build est le processus de crÃ©ation dâ€™une image Docker Ã  partir dâ€™un Dockerfile.

CaractÃ©ristiques :

ExÃ©cute Ã©tape par Ã©tape les instructions du Dockerfile.

RÃ©sulte en une image Docker, prÃªte Ã  Ãªtre utilisÃ©e ou poussÃ©e sur un registre.

Commande : docker build -t mon_image .

Exemple : Vous Ã©crivez un Dockerfile avec des instructions comme FROM, COPY, RUN, puis vous le construisez pour obtenir une image.

RÃ©sumÃ© visuel :
Ã‰lÃ©ment     RÃ´le	                    Persistant ?	    Dynamique ?	    CrÃ©Ã© Ã  partir de
Image	    ModÃ¨le figÃ© dâ€™une app	    Oui	                Non	            Dockerfile
Conteneur	Instance de lâ€™image	        Non (par dÃ©faut)    Oui	            Image
Volume	    Stockage persistant	        Oui	                Non	            Docker/Disk
Build	    Action de crÃ©er une image	N/A	                N/A	            Dockerfile



Un schÃ©ma visuel clair qui illustre les relations entre image, build, conteneur et volume dans DockerÂ :

                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚    Dockerfile      â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                        ğŸ”¨ docker build
                              â”‚
                              â–¼
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚     IMAGE          â”‚
                     â”‚  (modÃ¨le figÃ©)     â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                         docker run
                              â”‚
                              â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚      CONTENEUR         â”‚
                  â”‚ (instance de l'image)  â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚         VOLUME              â”‚
              â”‚ (stockage persistant,       â”‚
              â”‚   externe au conteneur)     â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


Lecture du schÃ©ma :
Dockerfile â†’ sert Ã  construire une image (via docker build).

Image â†’ sert de modÃ¨le pour exÃ©cuter un conteneur (via docker run).

Conteneur â†’ est l'instance active de lâ€™image, dans un environnement isolÃ©.

Volume â†’ permet de stocker des donnÃ©es en dehors du conteneur, afin qu'elles persistent.


Un exemple complet et rÃ©aliste dâ€™un petit projet Docker, avec les Ã©lÃ©ments suivants :
    Un fichier Python (app.py)
    Un Dockerfile pour construire l'image
    Une commande docker build pour crÃ©er l'image
    Une commande docker run avec un volume pour persister des donnÃ©es

ğŸ“ Structure du projet :
Copier
Modifier
mon_projet/
â”œâ”€â”€ app.py
â””â”€â”€ Dockerfile


ğŸ“„ app.py (un simple script qui Ã©crit dans un fichier)

# app.py
import os

fichier = "/data/log.txt"  # dossier montÃ© par le volume

with open(fichier, "a") as f:
    f.write("L'application a Ã©tÃ© lancÃ©e.\n")

print("Ã‰criture terminÃ©e.")



ğŸ³ Dockerfile

# Base lÃ©gÃ¨re avec Python
FROM python:3.11-slim

# CrÃ©e un dossier pour les volumes (optionnel)
RUN mkdir -p /data

# Copie le script dans l'image
COPY app.py /app/app.py

# DÃ©finit le dossier de travail
WORKDIR /app

# Commande de lancement par dÃ©faut
CMD ["python", "app.py"]


ğŸ”¨ Ã‰tape 1 : Construction de lâ€™image
Dans le dossier mon_projet, exÃ©cutez :

docker build -t mon_app_image .
Cela va construire une image nommÃ©e mon_app_image Ã  partir du Dockerfile.


â–¶ï¸ Ã‰tape 2 : ExÃ©cution du conteneur avec un volume

docker run --rm -v mon_volume_donnees:/data mon_app_image

    --rm : supprime le conteneur aprÃ¨s exÃ©cution.
    -v mon_volume_donnees:/data : monte un volume Docker nommÃ© mon_volume_donnees dans le dossier /data du conteneur.
    mon_app_image : nom de lâ€™image que vous avez construite.


ğŸ“‚ Ã‰tape 3 : Lire le contenu du volume
Pour inspecter ce que l'application a Ã©crit :

docker run --rm -v mon_volume_donnees:/data busybox cat /data/log.txt
Cette commande utilise une image lÃ©gÃ¨re busybox juste pour afficher le contenu du fichier.


ğŸ§  RÃ©sumÃ© du cycle :
    Dockerfile dÃ©finit comment construire l'image.
    docker build crÃ©e l'image (mon_app_image).
    docker run crÃ©e un conteneur Ã  partir de l'image.
    Le volume montÃ© permet Ã  l'application dâ€™Ã©crire des donnÃ©es persistantes.
    MÃªme si le conteneur est supprimÃ© (--rm), le volume persiste.